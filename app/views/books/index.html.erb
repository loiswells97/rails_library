<h1>Welcome to the library! 📚</h1>

<%= form_for(form_for_object_from_param(:filter), method: :get, url: books_path) do |f|%>
  <%= f.text_field(:search_term)%>
  <%= content_tag(:button, 'Search', type: 'submit')%>
  <%= link_to('Clear', books_path)%>
<% end %>

<%= link_to("📕 Add a new book", new_book_path, :class => 'action new')%>
<%= link_to("📜 Book lists", lists_path, :class => 'action new')%>
<% if @books.empty? && @search_term!=''%>
  <p>Sorry, there are no books matching your search 😬</p>
<% elsif @books.empty? %>
  <p>The library is currently empty 😭</p>
  <%= link_to("📕 Add a new book", new_book_path, :class => 'action new')%>
<% else %>
  <table>
    <tr>
      <th><%= link_to "Title", :sort => 'title', :filter => {search_term: @search_term} %></th>
      <th><%= link_to "Author", :sort => 'author', :filter => {search_term: @search_term} %></th>
      <th><%= link_to "Number of pages", :sort => 'number_of_pages', :filter => {search_term: @search_term} %></th>
      <th><%= link_to "Read?", :sort => 'has_been_read', :filter => {search_term: @search_term} %></th>
      <th>Actions</th>
    </tr>
  <% @books.each do |book| %>
    <tr>
      <td><%= book.title %></td>
      <td><%= book.author %></td>
      <td><%= book.number_of_pages %> pages</td>
      <td><%=
      if book.has_been_read == "Yes"
        "✅"
      elsif book.has_been_read == "No"
        "❌"
      elsif book.has_been_read == "In progress"
        "🔄"
      end %></td>
      <td>
        <%= link_to("🔍", book_path(book), :class => 'action show')%>
        <%= link_to("✏️", edit_book_path(book), :class => 'action edit')%>
        <%= link_to("🗑", delete_book_path(book), :class => 'action delete')%>

      </td>
    </tr>
  <% end %>
  </table>
<% end %>
